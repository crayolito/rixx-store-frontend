<div class="perfil-contenedor">
  <!-- Banner superior: foto, nombre y email -->
  <app-banner [nombre]="nombre()" [email]="email()" [fotoPerfil]="fotoPerfil()"
    (fotoActualizada)="onFotoActualizada($event)">
  </app-banner>

  <!-- Layout: menú lateral + contenido -->
  <div class="perfil-layout">
    <aside class="perfil-menu">
      <nav class="perfil-menu__navegacion">
        <button class="perfil-menu__opcion" [class.perfil-menu__opcion--activa]="seccionActiva() === 'perfil'"
          (click)="cambiarSeccion('perfil')" type="button">
          <img src="/iconos/ico-cliente.svg" alt="Perfil" class="perfil-menu__icono">
          <span>Mi Perfil</span>
        </button>
        <button class="perfil-menu__opcion" [class.perfil-menu__opcion--activa]="seccionActiva() === 'pedidos'"
          (click)="cambiarSeccion('pedidos')" type="button">
          <img src="/iconos/ico-orden.svg" alt="Pedidos" class="perfil-menu__icono">
          <span>Mis Pedidos</span>
        </button>
        <button class="perfil-menu__opcion" [class.perfil-menu__opcion--activa]="seccionActiva() === 'billetera'"
          (click)="cambiarSeccion('billetera')" type="button">
          <img src="/iconos/ico-billetera.svg" alt="Billetera" class="perfil-menu__icono">
          <span>Billetera</span>
        </button>
      </nav>
    </aside>

    <main class="perfil-contenido">
      <!-- Sección: Datos personales -->
      @if (seccionActiva() === 'perfil') {
      <section class="perfil-seccion">
        <div class="perfil-seccion__header">
          <h2 class="perfil-seccion__titulo">Información Personal</h2>
          <p class="perfil-seccion__subtitulo">Administra tu información de cuenta</p>
        </div>
        <app-datos-personales [nombre]="nombre()" [email]="email()" [telefono]="telefono()"
          [nacionalidad]="nacionalidad()" [tieneSocialLogin]="tieneSocialLogin()"
          (datosGuardados)="onDatosGuardados($event)">
        </app-datos-personales>
      </section>
      }

      <!-- Sección: Mis Pedidos -->
      @if (seccionActiva() === 'pedidos') {
      <section class="perfil-seccion perfil-seccion--pedidos">
        <div class="perfil-seccion__header">
          <h2 class="perfil-seccion__titulo">Mis Pedidos</h2>
          <p class="perfil-seccion__subtitulo">Revisa tus compras y códigos Gift Card</p>
        </div>
        <app-pedidos [pedidosAutomaticos]="pedidosAutomaticos()" [pedidosGiftCard]="pedidosGiftCard()">
        </app-pedidos>
      </section>
      }

      <!-- Sección: Billetera -->
      @if (seccionActiva() === 'billetera') {
      <section class="perfil-seccion perfil-seccion--billetera">
        <div class="perfil-seccion__header">
          <h2 class="perfil-seccion__titulo">Mi Billetera</h2>
          <p class="perfil-seccion__subtitulo">Saldo, recargas e historial de movimientos</p>
        </div>
        <app-billetera></app-billetera>
      </section>
      }
    </main>
  </div>
</div>
